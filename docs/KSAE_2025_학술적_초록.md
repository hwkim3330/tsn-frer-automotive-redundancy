# TSN Switch의 FRER 기능을 이용한 자동차 아키텍처 이중화 기술 및 성능 평가

## 저자 정보
- **저자**: 김현우
- **소속**: 한국전자기술연구원 모빌리티플랫폼연구센터
- **이메일**: hwkim3330@keti.re.kr
- **학회**: 2025 KSAE 춘계학술대회

---

## 서론

자동차 이더넷은 자율주행 및 안전 크리티컬 애플리케이션 확산에 따라, ISO 26262 기능 안전 표준에서 요구하는 데이터 무결성 보장과 **단일고장 허용(Single-Point Fault Tolerance)**을 지원할 수 있어야 한다. ISO 26262가 네트워크 계층 자체를 직접 규정하지는 않지만, 안전 신호 전달 경로의 연속성과 신뢰성을 확보하는 것은 필수적이다. 이러한 맥락에서, IEEE 802.1 TSN(Time-Sensitive Networking) 표준군은 안전 목표 달성을 뒷받침하는 통신 메커니즘을 제공하며, 그중 **IEEE 802.1CB FRER(Frame Replication and Elimination for Reliability)**은 대표적 접근 방식이다.

## 연구 방법

본 연구는 FRER을 Microchip EVB-LAN9662 스위치 평가보드 파이프라인에 적용하고, 프레임 계층에서의 동작을 패킷 트레이스로 실증한다. 제안 구성은 '식별–시퀀스 부여–복제–제거'의 네 단계를 포함한다. 먼저 VCAP(IS1) 규칙을 통해 UDP(IPv4) 스트림을 포트·프로토콜·주소 단위로 일의적으로 귀속시켜 단일 스트림 식별자(ISDX)에 할당한다. 송신 진입점에서는 하드웨어가 R-TAG(EtherType 0xF1C1)를 삽입하고 시퀀스 번호를 부여한 뒤, 동일 프레임을 독립 경로로 복제하여 송신한다. 수신 스위치는 멤버 스트림을 컴파운드 스트림으로 병합하고, 시퀀스 기반 중복 제거를 수행하여 최초 도착 프레임만 채택한다. 이 과정은 엔드노드 소프트웨어의 변경 없이 스위치 내부에서 투명하게 수행되므로, 상위 애플리케이션은 단일 경로와 동일한 사용자 경험을 유지한다.

## 실험 결과

패킷 분석 결과, 전송 프레임은 'Ethernet II → FRER R-TAG → IPv4 → UDP' 구조를 보이며, R-TAG 시퀀스 번호가 단조 증가함이 확인되었다. 또한 동일 페이로드가 이중 경로로 전송될 때 수신측에서 중복이 제거되는 현상이 관찰되었고, 이는 링크 단선이나 큐 지연 등 비정상 상황에서도 서비스 연속성을 보장하는 FRER의 목적을 입증하였다.

## 결론

결론적으로, 본 연구는 자동차 이더넷 환경에서 FRER이 ISO 26262 안전 목표 달성(무결성·단일고장 허용)과 IEEE 802.1 TSN 표준 준수를 동시에 뒷받침하는 실질적 해법임을 제시하며, EVB-LAN9662 기반 보드 레벨 검증을 통해 자율주행 및 안전 필수 신호 전달에서 요구되는 가용성과 신뢰성을 충족할 수 있음을 보여준다.

---

## 초록(요약문)

자동차 이더넷은 자율주행과 안전 크리티컬 애플리케이션의 확산으로, 네트워크 장애가 발생하더라도 통신의 연속성과 데이터 무결성을 유지해야 한다. 단일 경로 기반 통신은 링크 단선, 스위치 오류, 일시적 혼잡과 같은 현실적 고장에 취약하며, 장애 시점의 패킷 손실과 지연변동이 애플리케이션 계층까지 직접 전파되는 한계를 가진다. 본 연구는 이러한 문제를 근본적으로 완화하기 위한 핵심 기술인 IEEE 802.1CB FRER(Frame Replication and Elimination for Reliability)를 자동차 네트워크 스위치 파이프라인에 적용하고, 프레임 계층에서의 동작을 패킷 트레이스로 검증한다.

제안 구성의 핵심은 스위치 내부에서 완료되는 '식별–시퀀스 부여–복제–제거' 파이프라인이다. 우선 VCAP(IS1) 규칙으로 애플리케이션 UDP(IPv4) 스트림을 포트·프로토콜·주소 기준으로 일의적으로 식별하여 단일 스트림 식별자(ISDX)에 귀속시킨다. 송신 진입점에서는 하드웨어가 R‑TAG(EtherType 0xF1C1)를 삽입하며 시퀀스 번호를 부여하고, 동일 프레임을 서로 독립적인 두 경로로 복제하여 송신한다. 수신 인접 스위치는 경로별 멤버 스트림을 하나의 컴파운드 스트림으로 묶어 개별/시퀀스 복구를 수행하며, 동일 시퀀스에 대해서는 먼저 도착한 프레임을 원본으로 채택하고 늦게 도착한 프레임은 중복으로 폐기한다. 이 절차는 엔드노드 소프트웨어 변경 없이 스위치에서 투명하게 수행되므로, 애플리케이션은 단일 경로와 동일한 사용 경험을 유지한다.

패킷 분석 관점에서, 캡처된 이더넷 프레임은 'Ethernet II → FRER R‑TAG → IPv4 → UDP'의 계층 구조를 보이며, R‑TAG 내부의 시퀀스 번호가 단조 증가하는 것이 확인된다. 동일 페이로드가 이중 경로로 전송될 때 수신측에서는 한 건으로 축약되고 중복분이 제거되는 현상이 재현되었으며, 이는 링크 장애나 일시적 큐 지연과 같은 비정상 상황에서도 전송 연속성을 유지하는 FRER의 설계 목적을 충실히 뒷받침한다. 또한 보드 레벨에서 R‑TAG 삽입을 자동화함으로써, 트래픽 생성 도구나 엔드 호스트는 표준 UDP 소켓 기반 전송만으로도 FRER의 이점을 활용할 수 있음을 확인하였다. 

결과적으로 본 연구는 자동차 이더넷에서 FRER이 왜 필요한지(장애 내성 및 서비스 연속성 확보), 어떻게 구현되는지(VCAP/ISDX 기반 식별과 하드웨어 시퀀스 부여·복제·병합 복구), 무엇이 관찰되는지(프레임‑레벨의 R‑TAG 시퀀스와 중복 제거)를 체계적으로 제시하며, 자율주행 및 안전 필수 신호 전달에서 요구되는 가용성과 신뢰성 달성에 FRER이 실질적 해법이 될 수 있음을 보여준다.

---

## 키워드

- **한글**: TSN, FRER, IEEE 802.1CB, 자동차 이더넷, ISO 26262, 단일고장 허용, 이중화, 신뢰성
- **영문**: TSN, FRER, IEEE 802.1CB, Automotive Ethernet, ISO 26262, Single-Point Fault Tolerance, Redundancy, Reliability